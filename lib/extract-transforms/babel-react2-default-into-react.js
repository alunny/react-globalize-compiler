var esprima = require("esprima");
var syntaxUtils = require( "../util/syntax" );

var Syntax = esprima.Syntax;

/**
 * Transform `_react2["default"].<fn>` (commonly generated by babel when transpiling ES6) into
 * `Globalize.<fn>`.
 */
module.exports = {
  test: function(node) {
    return node.type === Syntax.CallExpression &&
      node.callee.type === Syntax.MemberExpression &&
      node.callee.object.type === Syntax.MemberExpression &&
      node.callee.object.object.type === Syntax.Identifier &&
      (
       node.callee.object.object.name === "_react2" ||
       node.callee.object.object.name === "_reactAddons2" ||
       node.callee.object.object.name === "_addons2"
      ) &&
      syntaxUtils.isDefaultProperty(node.callee.object.property);
  },

  transform: function(node) {
    node.callee.object = {
      type: Syntax.Identifier,
      name: "React"
    };
  }
};
