var esprima = require("esprima");

var Syntax = esprima.Syntax;

/**
 * Transform `_globalize2["default"].<fn>` (commonly generated by babel when transpiling ES6) into
 * `Globalize.<fn>`.
 */
module.exports = {
  test: function(node) {
    return node.type === Syntax.MemberExpression &&
      node.object.type === Syntax.Identifier &&
      node.object.name === "ReactGlobalize" &&
      node.property.type === Syntax.Identifier && (
        node.property.name === "FormatCurrency" ||
        node.property.name === "FormatDate" ||
        node.property.name === "FormatMessage" ||
        node.property.name === "FormatNumber" ||
        node.property.name === "FormatRelativeTime"
      );
  },

  transform: function(node) {
    node.type = Syntax.Identifier;
    node.name = node.property.name;
    delete node.object;
    delete node.property;
    delete node.computed;
  }
};
